\subsection{Decision 2: Selecting the Database Technology}

\subsection*{Status}
Accepted.

\subsection*{Architectural Summary}
In developing the TrIP system, tasked with unifying the payment and subscription management across three railroad tycoons' operations, we are faced with the decision of choosing an appropriate database technology. This choice hinges on our need to ensure data integrity, support complex queries for transaction processing, and maintain scalability and security.

\subsection*{Concern}
The main concern lies in selecting a database that can efficiently manage complex data relationships, provide high transactional integrity, and scale as needed without compromising on performance or security.

\subsection*{Context}
The database must handle a wide array of data, including user subscriptions, fare transactions, and station and route information, necessitating a robust system that supports complex queries and relational data structuring.

\subsection*{Criteria}
\begin{itemize}
    \item Data integrity and transactional consistency for financial transactions.
    \item Ability to support complex queries and relational data models.
    \item Scalability to grow with the system's user base and data volume.
    \item Performance under varying load conditions.
    \item Comprehensive security features to safeguard sensitive data.
\end{itemize}

\subsection*{Option 1: SQL Database (e.g., PostgreSQL)}
A relational database model renowned for its strong consistency, ACID (Atomicity, Consistency, Isolation, and Durability) compliance, and the ability to efficiently handle complex queries and data relationships.
\begin{itemize}
    \item \textbf{Pro:} High data integrity and robust support for complex relational data structures.
    \item \textbf{Pro:} We have a highly structured data.
    \item \textbf{Pro:} More developers are familiar with it, more resources on the topic. It has a strong community and over 30 years of active development.
    \item \textbf{Pro:} Good with concurrency.
    \item \textbf{Pro:} Open source and free.
    \item \textbf{Con:} Scalability challenges in horizontally distributed architectures compared to NoSQL options.
    \item \textbf{Con:} Requires accurate upfront planning of the data model due to its structured nature, thereby limiting flexibility.
\end{itemize}

\subsection*{Option 2: NoSQL Database (e.g., MongoDB)}
A distributed database system designed for scalability and flexibility, suitable for handling large volumes of diverse data types.
\begin{itemize}
    \item \textbf{Pro:} Offers superior scalability and flexibility for managing unstructured or semi-structured data.
    \item \textbf{Pro:} Enhances performance for non-structured data.
    \item \textbf{Con:} May compromise transactional integrity and consistency in favor of performance and scalability.
\end{itemize}

\subsection*{Decision}
After thorough consideration, the decision is to implement an \textbf{SQL database}, specifically PostgreSQL for it being open source, for the TrIP system. This decision is underpinned by the SQL database's unmatched data integrity, support for complex transactions, and relational data modeling capabilities, which are crucial for the financial transactions and data relationships inherent in the TrIP system. Furthermore, train payment data are by nature very structured, don't give much creativity to the passengers, thus a relational database seems a more natural choice. Given the higher familiarity of developers, this choice is good for the QAs favoured by the TrIP owner, such as:
\begin{itemize}
    \item Maintainability (priority 2). The owner wants a minimum amount of effort to maintain and build the system
    \item Operational costs (priority 2). The operational costs of the system should be as low as possible.
\end{itemize}

\subsection*{Consequences}
\textbf{Positive Consequences:}
\begin{itemize}
    \item Ensures high levels of data integrity and transactional consistency, critical for financial data and user subscriptions.
    \item Facilitates complex data queries and relationships, enabling sophisticated data analysis and reporting.
    \item Provides robust security features to protect sensitive data and comply with data protection regulations.
\end{itemize}
\textbf{Negative Consequences:}
\begin{itemize}
    \item May require additional strategies for scaling horizontally, such as implementing read replicas or sharding, to manage large data volumes and high traffic loads effectively.
    \item Could necessitate more intensive resource management and optimization to ensure performance at scale.
\end{itemize}
Choosing an SQL database aligns with the TrIP system's core requirements for data integrity, relational data handling, and transactional consistency. This foundation will support the system's initial functionality and long-term growth, with a focus on maintaining data accuracy and trustworthiness.