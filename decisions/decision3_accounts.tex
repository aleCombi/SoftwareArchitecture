\subsection{Decision 3: Account and Subscriptions management}

\subsection*{Status}
Accepted. Reviewed to consider Event 1 (tycoon default) and to add the possibility of outsourcing subscription management.

\subsection*{Architectural Summary}
\begin{tabular}{|p{3.5cm}|p{10.5cm}|}
    \hline
    \textbf{In the context of} & managing subscriptions and accounts of passengers, \\
    \hline
    \textbf{Facing} & the challenge of integrating many different subscriptions for the same passenger and letting subscription separated, \\
    \hline
    \textbf{To achieve} & streamlined integration with multiple tycoon systems, high passenger usability, ease of maintenance, \\
    \hline
    \textbf{We considered} & Option 1: Introduction of a subscription manager tool.; Option 2: Integrated Subscription-Route Optimization Service; Option 3: Include a Single-Ticket management module\\
    \hline
    \textbf{And decided for} & Option 1: Introduction of a subscription manager tool; and Option 3: Include a Single-Ticket management module  \\
    \hline
    \textbf{Because} & It enhances scalability and maintainability though modularity, it reduces system-wide failures risks, allows occasional travellers to easily use the system, \\
    \hline
    \textbf{Accepting} & Increased System Complexity, higher Initial Costs, Data Consistency Challenges. \\
    \hline
\end{tabular}

\subsection*{Concern}
A passenger wants to traver around the network using its subscription(s) instead of always having to buy a single fare.
Tycoons have explicitely requested to maintain their own subscriptions separated.
The following user stories are tied to this decision:
\begin{itemize}[noitemsep]
    \item \userStorySixteen,
    \item \userStoryTwentyThree,
    \item \userStoryThirty,
\end{itemize}

Specific concerns identified for the system include the following:
\begin{itemize}
    \item A passenger should be able to have different subscriptions for the three tycoons.
    \item Each of the three tycoon wants to have its own subscription fee system.
\end{itemize}

\subsection*{Context}
In developing the TrIP system, we explore subscription model architectures that align railway tycoons' need for flexibility with passengers' demand for simplicity. 
We assess the trade-offs between unified and tycoon-specific models to enhance both operational autonomy and passenger convenience.
When passengers want to go from station A to station B, they want to be able to use all the subscription they have and pay for the trains belonging to tycoons they are not subsribed to.
The terminal has to communicate with the tycoon systems to verify subscriptions and check routes.
Alternatively, if passengers have active subscriptions to a tycoon, they should be allowed onboard the train without a ticket. 

\subsection*{Criteria}
\begin{itemize}[noitemsep]
    \item \textit{Usability}: Ease of use for the passenger.
    \item \textit{Functionality}: Multiple route and subscriptions options for the passenger without excessive effort.
    \item \textit{Functionality}: The system returns to the passenger usable options based on price/time/availability/subscription.
    \item \textit{Integrability}: Simple integration with the tycoon systems.
    \item \textit{Maintainability and scalability}: Ease to accomodate changes in the subscriptions options from tycoons.
\end{itemize}

\subsection*{Option 1: Introduction of a subscription manager tool, route management needs to take passenger subscriptions into consideration.}
We want to include a Subscription Manager module to our functional view. 
Such a module has the responsibility to verify subscriptions, communicating with the tycoon system.
It should also allow passengers to create their own TrIP account and tie it to subscriptions.
Since we need scalability, we consider using a TrIP account that is tied to one or many subscriptions, and let the passenger add new or automatically renew the existing ones.
This means that we need an authentication means, like a magnetic card, or a phone app linked to NFC scanning or other alternatives.
This will be the topic of a future decision.
Furthermore, the Route management module needs to be able to optimize with respect to price, given that the passenger holds some subscription.
The idea is to add an optional initial iteration to the sequence of actions sketched in decision 3.
This requires a way to communicate the subscription to the terminal, be it a QR code, a code or a magnetic card. 
This should be the topic of another decision.
\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{drawings/decision4_drawings/account_functional.png}
    \caption{Account Management Interaction for single-ticket.}
    \label{fig:account_management_ticket}
\end{figure}
\subsection*{Pros}

\begin{itemize}[noitemsep]
    \item \textbf{Modular Architecture:} The separation of subscription management and route optimization into distinct modules enhances the system's modularity, making it easier to maintain, update, or replace parts of the system without affecting others.
    \item \textbf{Scalability:} Designed with scalability in mind, allowing for easy addition and management of new subscriptions or renewal of existing ones, which can accommodate growing passenger demands and evolving business requirements.
    \item \textbf{Reduced Risk of System-wide Failures:} By distributing functionalities across different systems or modules, the impact of a failure in one component is limited, reducing the risk of system-wide outages and improving overall system reliability.
    \item \textbf{Flexibility in Passenger Authentication:} Supports various means of passenger authentication (e.g., magnetic card, smartphone app), offering flexibility and convenience for passengers to access their subscriptions and travel seamlessly.
\end{itemize}

\subsection*{Cons}

\begin{itemize}[noitemsep]
    \item \textbf{Increased System Interactions:} The decoupled nature of the system requires more interactions between separate modules (e.g., subscription verification and route optimization), which can increase the complexity of integration and potentially lead to higher latency in response times.
    \item \textbf{Integration Complexity:} Ensuring seamless communication and data consistency between different modules can introduce additional complexity in system integration and require more sophisticated coordination mechanisms.
    \item \textbf{Higher Overhead:} Managing separate systems for subscription and route optimization may lead to higher operational overhead in terms of both system resources and administrative efforts to maintain multiple components.
\end{itemize}

\subsection*{Option 2: Integrated Subscription-Route Optimization Service}
The Integrated Subscription-Route Optimization Service (IS-ROS) combines the functionality of subscription management and route optimization into a single service. 
\subsubsection*{Pros}
\begin{itemize}[noitemsep]
    \item \textbf{Performance} Streamlines the process by combining two functionalities, potentially reducing response time for route optimization.
    \item \textbf{Reduced Interactions between systems} Simplifies the architecture by reducing the number of interactions between separate systems.
\end{itemize}
\subsubsection*{Cons}
\begin{itemize}[noitemsep]
    \item \textbf{Increased Complexity within Single Module} Increases complexity within a single system, which may require more resources to develop and maintain.
    \item \textbf{Failures have larger impact} May lead to higher dependency on a single system, which can be a point of failure if the system goes down.
\end{itemize}

\subsection*{Option 3: Include a Single-Ticket management module}
Abstractly, a single ticket can be seen as an account that expires once the journey is completed. As an account, it is linked to a passenger via their personal data, if it is related to a booking or via 
an anonymous user ID if it is not.
Its temporary nature though causes different needs for information storage and flow, as updates for single tickets occurs often.
Hence the need for a separated module and a related database.

\subsection*{Pros}
\begin{itemize}[noitemsep]
    \item Efficient management specific to single-ticket purchases, improving usability for occasional travellers.
    \item Dedicated module enhances system's ability to handle frequent updates inherent to temporary accounts.
    \item Improved usability for less tech-savy passengers.
\end{itemize}

\subsection*{Cons}
\begin{itemize}[noitemsep]
    \item Adds complexity to the system, requiring sophisticated integration with other components.
    \item Potential for fragmented customer experience when navigating between single-ticket and subscription services.
\end{itemize}

\subsection*{Option 4: Complete outsourcing of the subscription management}
The system could be implemented as only taking care of payments, letting some other system or the tycoons themselves tell our system who has which subscription and how subscription changes pricing and rights.

\subsection*{Pros}
\begin{itemize}[noitemsep]
    \item Simplifies the system's responsibilities, focusing on payment processing.
    \item Reduces internal system complexity by leveraging external expertise for subscription management.
    \item Potentially lowers initial development and maintenance costs by relying on tycoons' existing infrastructure.
\end{itemize}

\subsection*{Cons}
\begin{itemize}[noitemsep]
    \item Introduces dependencies on external systems, potentially affecting reliability and response times.
    \item Limits control over the subscription management experience, impacting the ability to implement customized features.
    \item Raises integration challenges, especially in achieving real-time data synchronization and maintaining data consistency.
    \item May complicate the user experience due to interactions with multiple systems for subscription management and payments.
\end{itemize}

\subsection*{Decision}
We decided to pick Option 1. The increased concern for scalability, caused by Event 1, points clearly to the listed pros of this option. Furthermore, the focus on modularity
gives us easy maintainability, which is important for the TrIP owner.
Performance in this case doesn't seem to be that central, as optimization of routes should be precomputed and cached, given that timetables should not change often and that subscription have relatively long lasting periods.
With our option, we still have the flexibility to assign more computational or data access resources to the module who needs them the most.
We also include Option 3, as we think Single Tickets remain central to achieve the Usability required by stakeholders who are less familiar with technology such as smartphone apps or are travelling only occasionally.
We decided to discard Option 4, as we believe integration among tycoon systems is central in the mandate of the TrIP system, and the integrability concerns of the tycoons cannot be addressed properly without providing proper subscription management.

\subsection*{Consequences}
\subsection*{Positive Consequences}

\begin{itemize}[noitemsep]
    \item \textbf{Enhanced Scalability:} Modular design facilitates easy scaling and integration of new features.
    \item \textbf{Improved Maintainability:} Simplifies updates and troubleshooting, allowing for technology-specific optimizations within each module.
    \item \textbf{Reduced System-wide Failure Risk:} Isolates failures to individual modules, enhancing overall system reliability.
    \item \textbf{Enhanced Usability for Single-Ticket buyers:} A specific module allows good handling of their needs with a high performance DB.
\end{itemize}

\subsection*{Negative Consequences}

\begin{itemize}[noitemsep]
    \item \textbf{Increased System Complexity:} Necessitates sophisticated coordination and integration, potentially introducing latency.
    \item \textbf{Higher Initial Costs:} Development and maintenance of separate modules may lead to higher initial and operational costs.
    \item \textbf{Data Consistency Challenges:} Requires robust synchronization mechanisms to ensure data consistency across modules.
\end{itemize}